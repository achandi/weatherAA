(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{23:function(e,t,a){e.exports={panel:"panel_eWt3A"}},24:function(e,t,a){e.exports={card:"card_IJcez"}},25:function(e,t,a){e.exports=a(49)},30:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),i=(a(30),a(10)),l=a.n(i),u=a(21),s=a(4),d=a(2),m=a(1),p=a(22),h=a.n(p),f=a(7),v=a.n(f),w=a(23),b=a.n(w),g=function(e){return r.a.createElement("div",{className:b.a.panel},e.children)},E=a(24),O=a.n(E),j=function(e){return r.a.createElement("div",{className:O.a.card},e.children)},y=function(e){return r.a.createElement(j,null,r.a.createElement("div",null,r.a.createElement("h1",null,e.day,e.weather.forecastFrom&&"*"),r.a.createElement("img",{src:e.weather.icon}),r.a.createElement("h3",null,e.weather.displayWeather),r.a.createElement("h3",null,"High ",e.weather.highTemp," Low ",e.weather.lowTemp),r.a.createElement("div",{className:"percipitation"}," ",e.weather.totalRain&&"Rain: ".concat(e.weather.totalRain," begins ").concat(e.weather.rainStart),e.weather.totalSnow&&"Snow: ".concat(e.weather.totalSnow,"  begins  ").concat(e.weather.snowStart)),r.a.createElement("div",{className:"averages"},r.a.createElement("li",null,"Average wind: ",e.weather.avgWind," "),r.a.createElement("li",null,"Average cloudiness: ",e.weather.avgCloudiness)),r.a.createElement("p",null,e.weather.forecastFrom&&"*Forecast from "+e.weather.forecastFrom)))},C=a(5),S=["Toronto","Vancouver","Montreal"],A={time:[],rain:[],snow:[],wind:[],clouds:[],temp:[],description:[],icon:[]},T={metric:{temp:"\xb0C",wind:"m/sec"},imperial:{temp:"\xb0F",wind:"mph"},kelvin:{temp:"K",wind:"m/sec"}},_=function(e){return e.reduce((function(e,t){return e+t}),0)},k=function(e){return _(e)/e.length},I=function(e){var t=0;return function(a,n){var r=function(e,t){var a=new Date(1e3*(e+t));return[a.toLocaleTimeString({},{timeZone:"UTC",hour12:!0,hour:"numeric",minute:"numeric"}),a.toLocaleDateString({},{timeZone:"UTC",weekday:"long"})]}(n.dt,e),c=Object(d.a)(r,2),o=c[0],i=c[1];if(a[i]||(t+=1),t>5)return a;var l=a[i]||A;return Object(m.a)(Object(m.a)({},a),{},Object(s.a)({},i,Object.entries(l).reduce(function(e,t){var a={time:e};a.temp=t.main.temp;var n=Object(d.a)(t.weather,1)[0];a.description=n.description,a.icon=n.icon;var r=t.rain;r=void 0===r?{"3h":0}:r,a.rain=r["3h"];var c=t.snow;c=void 0===c?{"3h":0}:c,a.snow=c["3h"];var o=t.wind;o=void 0===o?{speed:0}:o,a.wind=o.speed;var i=t.clouds;return i=void 0===i?{all:0}:i,a.clouds=i.all,function(e,t){var n=Object(d.a)(t,2),r=n[0],c=n[1];return Object(m.a)(Object(m.a)({},e),{},Object(s.a)({},r,[].concat(Object(C.a)(c),[a[r]])))}}(o,n),{})))}},x=function(e,t){var a=function(e){var t=Object(C.a)(e).sort((function(t,a){return e.filter((function(e){return e===t})).length-e.filter((function(e){return e===a})).length})).pop();return[t,e.findIndex((function(e){return e===t}))]}(e.description),n=Object(d.a)(a,2),r=n[0],c=n[1],o=Math.round(_(e.rain)),i=Math.round(_(e.snow)),l=o>0&&e.time[e.rain.findIndex((function(e){return e>0}))],u=i>0&&e.time[e.snow.findIndex((function(e){return e>0}))],s="http://openweathermap.org/img/wn/".concat(e.icon[c].replace("n","d"),"@2x.png");return{forecastFrom:"2:00 am"!==e.time[0]&&e.time[0],displayWeather:r.toUpperCase(),highTemp:Math.round(Math.max.apply(Math,Object(C.a)(e.temp)))+t.temp,lowTemp:Math.round(Math.min.apply(Math,Object(C.a)(e.temp)))+t.temp,avgWind:Math.round(k(e.wind))+t.wind,avgCloudiness:"".concat(Math.round(k(e.clouds))," %"),icon:s,totalRain:!!o&&o+" mm",totalSnow:!!i&&i+" mm",rainStart:l,snowStart:u}},M=function(e){var t;return r.a.createElement(g,null,e.data?(t=e.data,Object.entries(t).map((function(t,a){var n=Object(d.a)(t,2),c=n[0],o=n[1];return r.a.createElement(y,{key:e.city+c,weather:x(o,e.measurement),day:c})}))):null)},D=a(9),L=a.n(D),R=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",{className:L.a.searchPanel},r.a.createElement(g,null,r.a.createElement("span",{className:L.a.searchTitle},"5 day Forecast - Search Cities"),r.a.createElement("div",{className:L.a.searchInput},e.children,r.a.createElement("datalist",{id:"suggestions"},S.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("select",{onChange:function(t){return e.setUnits(t.target.value)},value:e.units},Object.keys(T).map((function(e){return r.a.createElement("option",{key:e},e)}))),r.a.createElement("input",{onChange:function(e){return o(e.target.value)},autoComplete:"on",list:"suggestions",value:c}),r.a.createElement("button",{onClick:function(){return e.setCity(c.toLowerCase())}},"Search"))))},F={loading:!1,error:"",data:{},loadedCity:""},N=function(e,t){switch(t.type){case"DATA_GET":return Object(m.a)(Object(m.a)({},e),{},{loading:!0,error:""});case"DATA_FAIL":return Object(m.a)(Object(m.a)({},e),{},{loading:!1,error:t.err});case"DATA_SUCCESS":var a=function(e){var t=e.city.timezone;return[e.city.name.toLowerCase(),e.list.reduce(I(t),{})]}(t.data),n=Object(d.a)(a,2),r=n[0],c=n[1];return Object(m.a)(Object(m.a)({},e),{},{loading:!1,data:Object(m.a)(Object(m.a)({},e.data),{},Object(s.a)({},r,c)),loadedCity:r});case"CLEAR_DATA":return Object(m.a)(Object(m.a)({},e),{},{loadedCity:"",data:{}});case"DISMISS_ERROR":return Object(m.a)(Object(m.a)({},e),{},{error:""});default:return e}},U=function(){var e=Object(n.useState)(S[0]),t=Object(d.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(Object.keys(T)[0]),i=Object(d.a)(o,2),s=i[0],m=i[1],p=Object(n.useReducer)(N,F),f=Object(d.a)(p,2),w=f[0],b=f[1];Object(n.useEffect)((function(){c(S[0]),b({type:"CLEAR_DATA"})}),[s]),Object(n.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,w.data&&w.data[a]){e.next=7;break}return b({type:"DATA_GET"}),e.next=5,h.a.get("".concat("https://api.openweathermap.org/data/2.5/forecast","?units=").concat(s,"&q=").concat(a,"&appid=").concat("3f46226d1271869e4631e1f94137254d"));case 5:t=e.sent,b({type:"DATA_SUCCESS",data:t.data,city:a});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response?(b({type:"DATA_FAIL",err:"".concat(e.t0.name," ").concat(e.t0.response.data.message)}),c(w.loadedCity)):(b({type:"DATA_FAIL",err:"".concat(e.t0.name," ").concat(e.t0.message)}),c(w.loadedCity));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[a,s]);return r.a.createElement("div",{className:v.a.app},r.a.createElement(R,{setCity:function(e){return c(e)},units:s,setUnits:function(e){return m(e)}},r.a.createElement("span",{className:v.a.loadedCity},"City Loaded:",r.a.createElement("select",{onChange:function(e){return c(e.target.value)},value:a},w.data&&Object.keys(w.data).map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement("br",null),w.error&&r.a.createElement("div",{className:v.a.error},w.error,r.a.createElement("button",{onClick:function(){return b({type:"DISMISS_ERROR"})}},"X")),w.loading&&r.a.createElement("div",{className:v.a.loading},"Loading..."),r.a.createElement("div",null,function(e){if(e)return r.a.createElement(M,{measurement:T[s],city:a,data:e[a.toLowerCase()]})}(w.data)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports={loading:"loading_3qya0",error:"error_283--",loadedCity:"loadedCity_2H-Hp"}},9:function(e,t,a){e.exports={searchPanel:"searchPanel_3Z6oI",searchTitle:"searchTitle_3Z9pI",searchInput:"searchInput_2EF7j"}}},[[25,1,2]]]);
//# sourceMappingURL=main.c10b038d.chunk.js.map